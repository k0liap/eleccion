jQuery(document).ready(function(a){var b={popup:a(".et_panel-popup"),closePopupIcon:'<span class="et_close-popup et-button-cancel et-button"><i class="et-admin-icon et-delete"></i></span>',spinner:'<div class="et-loader ">\t\t\t\t\t<svg class="loader-circular" viewBox="25 25 50 50">\t\t\t\t\t<circle class="loader-path" cx="50" cy="50" r="12" fill="none" stroke-width="2" stroke-miterlimit="10"></circle>\t\t\t\t\t</svg>\t\t\t\t</div>',i:0,j:0,dashboard_logo:a(document).find(".etheme-logo .logo-img").html(),top_bar_logo_src:a(document).find(".toplevel_page_et-panel-welcome .wp-menu-image img").attr("src")},c={openPopup:function(){a("body").addClass("et_panel-popup-on"),b.popup.html(b.spinner)},closePopup:function(a,c,d){b.popup.html("").addClass("loading"),("boolean"==typeof c&&1==c||void 0===c)&&b.popup.prepend(b.closePopupIcon),b.popup.append(a.response.icon),b.popup.append(a.response.msg),b.popup.addClass("active").removeClass("loading"),"boolean"==typeof d&&1==d&&(window.location=window.location.href)}};a("form.xstore-panel-settings").on("submit",function(b){b.preventDefault();var e=[],f=[];c.openPopup(),a(this).parent().parent().find(".et-tabs-content").each(function(){var b=a(this).attr("data-tab-content");"import"!==b&&(e.push(b),f.push(a(this).find("form").serializeArray()))}),d(e,f)});var d=function(e,f){a.ajax({method:"POST",url:ajaxurl,dataType:"JSON",data:{action:"et_branding_save_settings",settings:f[b.i],type:e[b.i]},success:function(a){e.slice(b.i,e.length),f.slice(b.i,f.length),b.i<e.length?(d(e,f),b.i++):(c.closePopup(a),b.i=0)},error:function(){b.i=0,alert(XStoreBrandingConfig.ajaxError)}})};a(document).on("change keyup keydown","form.xstore-panel-settings input[data-js-img-var]",function(){var c=a(this).val(),d=a(this).data("js-selector"),e=a(this).data("js-img-var");""!=c?"dashboard_logo"==e?(c='<img src="'+c+'">',a(d).html(c)):a(d).attr("src",c):"dashboard_logo"==e?a(d).html(b[e]):a(d).attr("src",b[e])}),a(document).on("change keyup keydown","form.xstore-panel-settings input[data-js-selector]:not([data-js-img-var])",function(){var b=a(this).attr("placeholder"),c=a(this).data("js-selector"),d=a(this).val();d=""!=d?d:b,a(c).html(d)}),a('.et-tabs-filters [data-tab="import"]').on("click",function(){var c=a('[data-tab-content="import"]'),d=[],e=a(this).parent().parent().find(".et-tabs-content:not([data-tab-content=import])").length,f=a('[data-tab-content="import"]').find(".et-panel-loader");c.find("#import").val(""),c.addClass("loading"),f.addClass("active"),a("#export").val(XStoreBrandingConfig.loadingOptions),a(this).parent().parent().find(".et-tabs-content").each(function(){var g=a(this).attr("data-tab-content");if("import"!==g){var h=a(this).find("form").serializeArray();a.ajax({method:"POST",url:ajaxurl,dataType:"JSON",data:{action:"et_branding_export_settings",type:g,form:h},success:function(g){b.j++,d.push(g),b.j===e&&(a("#export").val(JSON.stringify(d)),c.removeClass("loading"),f.removeClass("active"),b.j=0)},error:function(){alert(XStoreBrandingConfig.ajaxError)}})}})}),a(".xstore-panel-import-settings").on("submit",function(b){b.preventDefault();var d=a(this),e=d.serializeArray(),f=e[0].value;if(""===f.trim())return void alert(XStoreBrandingConfig.pasteYourOptions);c.openPopup(),a.ajax({method:"POST",url:ajaxurl,dataType:"JSON",data:{action:"et_branding_import_settings",settings:JSON.parse(f)},success:function(a){c.closePopup(a,!0,!0)},error:function(){alert(XStoreBrandingConfig.ajaxError)}})}),a(".xstore-panel-import-settings #reset_settings").on("click",function(){confirm(XStoreBrandingConfig.resetOptions)&&(c.openPopup(),a.ajax({method:"POST",url:ajaxurl,dataType:"JSON",data:{action:"et_branding_reset_settings"},success:function(a){c.closePopup(a,!1,!0)},error:function(){alert(XStoreBrandingConfig.ajaxError)}}))}),a("form.xstore-panel-settings .button-upload-image").click(function(b){var c,d="",e=a(this).data("title"),f=a(this).data("button-title"),g=a(this).data("image-id"),h=a(this).next(".button-remove-image"),i=a(this).parents(".et-tabs-content");b.preventDefault(),d=wp.media({title:e,button:{text:f},multiple:!1}).on("select",function(){c=d.state().get("selection").first().toJSON(),a(i).find("."+g+"_preview").html('<img src="'+c.url+'">'),a(i).find("#"+g).val(c.url).trigger("change"),h.show()}).open()}),a("form.xstore-panel-settings .button-remove-image").click(function(b){var c=a(this).data("option-name"),d=a(this).parents(".et-tabs-content");a(d).find("."+c+"_preview").html(""),a(d).find("#"+c).val("").trigger("change")}),a("head").append('<style id="et_branding-live-css"></style>');var e={change:function(b,c){setTimeout(function(){b.originalEvent&&(a(b.target).trigger("change"),a(document).find("#et_branding-live-css").append(":root{--et_admin_"+a(b.target).data("css-var")+": "+a(b.target).val()+" !important;}"))},1)},clear:function(){var b=defaultColor=a(this).parent().find(".color-field").data("default"),c=a(this).parent().find(".color-field").data("css-var");a(document).find("#et_branding-live-css").append(":root{--et_admin_"+c+": "+b+" !important;}")}};a("form.xstore-panel-settings .color-field").wpColorPicker(e),a("#etheme_admin_css-inline-css").length<1&&a("head").append('<style id="etheme_admin_css-inline-css"></style>'),a("form.xstore-panel-settings #admin_css").on("change input keyup keydown",function(){a(document).find("#etheme_admin_css-inline-css").text(a(this).val())}),a(".xstore-panel-multicheckbox[data-type=panel_pages] input").on("change",function(){var b=a(this).attr("id").replace("page_","").replace("_","-");switch(b){case"customize":var c=a(".etheme-page-nav ul li a[href*=customize], .toplevel_page_et-panel-welcome li a[href*=customize], #wp-admin-bar-et-top-bar-menu li a[href*=customize]");break;case"sponsors":var c=a("#toplevel_page_et-panel-welcome a[href*=wpml],#toplevel_page_et-panel-welcome a[href*=wpkraken],#toplevel_page_et-panel-welcome a[href*=themeforest], #wp-admin-bar-et-top-bar-menu a[href*=wpml],#wp-admin-bar-et-top-bar-menu a[href*=wpkraken],#wp-admin-bar-et-top-bar-menu a[href*=themeforest],#toplevel_page_et-panel-welcome a[href*=overflowcafe],#toplevel_page_et-panel-welcome a[href*=bluehost],#toplevel_page_et-panel-welcome a[href*=yithemes]");break;default:var c=a(".etheme-page-nav ul li a[href*=et-panel-"+b+"], .toplevel_page_et-panel-welcome li a[href*=et-panel-"+b+"], #wp-admin-bar-et-top-bar-menu li a[href*=et-panel-"+b+"]")}a(this).prop("checked")?c.show():c.hide()})});